<%- include("partials/header") %>

<div class="container my-5" style="max-width: 900px;">
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-2 mb-4">
    <div>
      <h1 class="mb-1">Môj profil</h1>
      <p class="text-muted mb-0">Tu si vieš pozrieť svoje údaje a upraviť ich.</p>
    </div>
    <div class="d-flex gap-2">
      <a class="btn btn-primary" href="/profil/edit"><i class="fa-solid fa-pen-to-square me-1"></i> Upraviť profil</a>
      <form action="/logout" method="POST" class="m-0">
        <input type="hidden" name="_csrf" value="<%= csrfToken %>">
        <button type="submit" class="btn btn-outline-secondary"><i class="fa-solid fa-right-from-bracket me-1"></i> Odhlásiť</button>
      </form>
    </div>
  </div>

  <div class="row g-4">
    <div class="col-12 col-lg-7">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title mb-3">Základné informácie</h5>

          <div class="row g-3">
            <div class="col-12 col-md-6">
              <div class="text-muted small">Meno</div>
              <div class="fw-semibold"><%= user.first_name || "-" %></div>
            </div>
            <div class="col-12 col-md-6">
              <div class="text-muted small">Priezvisko</div>
              <div class="fw-semibold"><%= user.last_name || "-" %></div>
            </div>
            <div class="col-12">
              <div class="text-muted small">Používateľské meno</div>
              <div class="fw-semibold"><%= user.username || "-" %></div>
            </div>
            <div class="col-12">
              <div class="text-muted small">E-mail</div>
              <div class="fw-semibold"><%= user.email || "-" %></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-12 col-lg-5">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title mb-3">Účet</h5>

          <% if (user.role && user.role !== "user") { %>
            <div class="d-flex align-items-center justify-content-between mb-2">
              <div class="text-muted">Rola</div>
              <span class="badge bg-info text-dark text-uppercase"><%= user.role %></span>
            </div>
          <% } %>

          <div class="d-flex align-items-center justify-content-between">
            <div class="text-muted">Vytvorený</div>
            <div class="fw-semibold">
              <%= user.created_at ? new Date(user.created_at).toLocaleString("sk-SK") : "-" %>
            </div>
          </div>

          <hr>
          <p class="text-muted mb-0" style="font-size: 0.95rem;">
            Tip: Ak chceš zmeniť heslo, choď do <strong>Upraviť profil</strong> a vyplň nové heslo.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include("partials/footer") %>
